{"nodes": [{"code": "        this.remotingServer.registerProcessor(RequestCode.QUERY_MESSAGE, queryProcessor, this.queryMessageExecutor);\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 61, "desc": "moveFieldAccess", "group": 0}, {"code": "        this.remotingServer.registerProcessor(RequestCode.VIEW_MESSAGE_BY_ID, queryProcessor, this.queryMessageExecutor);\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 62, "desc": "moveFieldAccess", "group": 0}, {"code": "        this.fastRemotingServer.registerProcessor(RequestCode.QUERY_MESSAGE, queryProcessor, this.queryMessageExecutor);\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 63, "desc": "moveFieldAccess", "group": 0}, {"code": "        this.fastRemotingServer.registerProcessor(RequestCode.VIEW_MESSAGE_BY_ID, queryProcessor, this.queryMessageExecutor);\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 64, "desc": "moveFieldAccess", "group": 0}, {"code": "        this.queryThreadPoolQueue = new LinkedBlockingQueue<Runnable>(this.brokerConfig.getQueryThreadPoolQueueCapacity());\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 65, "desc": "addExpressionStatement", "group": 0}, {"code": "        LOG_WATER_MARK.info(\"[WATERMARK] Query Queue Size: {} SlowTimeMills: {}\", this.queryThreadPoolQueue.size(), headSlowTimeMills4QueryThreadPoolQueue());\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 66, "desc": "addExpressionStatement", "group": 0}, {"code": "            this.queryMessageExecutor = new BrokerFixedThreadPoolExecutor(\n                this.brokerConfig.getQueryMessageThreadPoolNums(),\n                this.brokerConfig.getQueryMessageThreadPoolNums(),\n                1000 * 60,\n                TimeUnit.MILLISECONDS,\n                this.queryThreadPoolQueue,\n                new ThreadFactoryImpl(\"QueryMessageThread_\"));\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 67, "desc": "addExpressionStatement", "group": 0}, {"code": "        this.remotingServer.registerProcessor(RequestCode.QUERY_MESSAGE, queryProcessor, this.queryMessageExecutor);\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 68, "desc": "updateExpressionStatement   by", "group": 0}, {"code": "        this.remotingServer.registerProcessor(RequestCode.VIEW_MESSAGE_BY_ID, queryProcessor, this.queryMessageExecutor);\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 69, "desc": "updateExpressionStatement   by", "group": 0}, {"code": "        this.fastRemotingServer.registerProcessor(RequestCode.QUERY_MESSAGE, queryProcessor, this.queryMessageExecutor);\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 70, "desc": "updateExpressionStatement   by", "group": 0}, {"code": "        this.fastRemotingServer.registerProcessor(RequestCode.VIEW_MESSAGE_BY_ID, queryProcessor, this.queryMessageExecutor);\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 71, "desc": "updateExpressionStatement   by", "group": 0}, {"code": "    public long headSlowTimeMills4QueryThreadPoolQueue() {\n        return this.headSlowTimeMills(this.queryThreadPoolQueue);\n    }\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 72, "desc": "addMethodDeclaration", "group": 0}, {"code": "    public BlockingQueue<Runnable> getQueryThreadPoolQueue() {\n        return queryThreadPoolQueue;\n    }\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 73, "desc": "addMethodDeclaration", "group": 0}, {"code": "    private ExecutorService queryMessageExecutor;\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 74, "desc": "addFieldDeclaration", "group": 0}, {"code": "    private final BlockingQueue<Runnable> queryThreadPoolQueue;\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/BrokerController.java", "id": 75, "desc": "addFieldDeclaration", "group": 0}, {"code": "    public void setQueryThreadPoolQueueCapacity(final int queryThreadPoolQueueCapacity) {\n        this.queryThreadPoolQueueCapacity = queryThreadPoolQueueCapacity;\n    }\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__common/src/main/java/org/apache/rocketmq/common/BrokerConfig.java", "id": 79, "desc": "addMethodDeclaration", "group": 1}, {"code": "    public int getQueryThreadPoolQueueCapacity() {\n        return queryThreadPoolQueueCapacity;\n    }\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__common/src/main/java/org/apache/rocketmq/common/BrokerConfig.java", "id": 80, "desc": "addMethodDeclaration", "group": 1}, {"code": "    public void setQueryMessageThreadPoolNums(final int queryMessageThreadPoolNums) {\n        this.queryMessageThreadPoolNums = queryMessageThreadPoolNums;\n    }\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__common/src/main/java/org/apache/rocketmq/common/BrokerConfig.java", "id": 81, "desc": "addMethodDeclaration", "group": 1}, {"code": "    public int getQueryMessageThreadPoolNums() {\n        return queryMessageThreadPoolNums;\n    }\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__common/src/main/java/org/apache/rocketmq/common/BrokerConfig.java", "id": 82, "desc": "addMethodDeclaration", "group": 1}, {"code": "    private int queryThreadPoolQueueCapacity = 20000;\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__common/src/main/java/org/apache/rocketmq/common/BrokerConfig.java", "id": 83, "desc": "addFieldDeclaration", "group": 1}, {"code": "    private int queryMessageThreadPoolNums = 8 + Runtime.getRuntime().availableProcessors();\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__common/src/main/java/org/apache/rocketmq/common/BrokerConfig.java", "id": 84, "desc": "addFieldDeclaration", "group": 1}, {"code": "        runtimeInfo.put(\"queryThreadPoolQueueSize\", String.valueOf(this.brokerController.getQueryThreadPoolQueue().size()));\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/processor/AdminBrokerProcessor.java", "id": 76, "desc": "addExpressionStatement", "group": 2}, {"code": "        runtimeInfo.put(\"queryThreadPoolQueueCapacity\",\n            String.valueOf(this.brokerController.getBrokerConfig().getQueryThreadPoolQueueCapacity()));\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/processor/AdminBrokerProcessor.java", "id": 77, "desc": "addExpressionStatement", "group": 2}, {"code": "        runtimeInfo.put(\"queryThreadPoolQueueHeadWaitTimeMills\", String.valueOf(this.brokerController.headSlowTimeMills4QueryThreadPoolQueue()));\n", "file_name": "5a2e71098793be75cc5b2c8984e99ad3651eba40__CLDIFF__broker/src/main/java/org/apache/rocketmq/broker/processor/AdminBrokerProcessor.java", "id": 78, "desc": "addExpressionStatement", "group": 2}], "edges": [{"link_type_str": "def-use@field", "source": 65, "text": "def-use@field", "type": 57, "value": 1, "target": 75}, {"link_type_str": "def-use@field", "source": 67, "text": "def-use@field", "type": 57, "value": 1, "target": 75}, {"link_type_str": "def-use@field", "source": 67, "text": "def-use@field", "type": 57, "value": 1, "target": 74}, {"link_type_str": "def-use@taicu", "source": 75, "text": "def-use@taicu", "type": 51, "value": 1, "target": 73}, {"link_type_str": "def-use@taicu", "source": 75, "text": "def-use@taicu", "type": 51, "value": 1, "target": 72}, {"link_type_str": "def-use@field", "source": 68, "text": "def-use@field", "type": 57, "value": 1, "target": 74}, {"link_type_str": "def-use@field", "source": 69, "text": "def-use@field", "type": 57, "value": 1, "target": 74}, {"link_type_str": "def-use@field", "source": 70, "text": "def-use@field", "type": 57, "value": 1, "target": 74}, {"link_type_str": "def-use@field", "source": 71, "text": "def-use@field", "type": 57, "value": 1, "target": 74}, {"link_type_str": "def-use@field", "source": 66, "text": "def-use@field", "type": 57, "value": 1, "target": 75}, {"link_type_str": "def-use@method", "source": 66, "text": "def-use@method", "type": 56, "value": 1, "target": 72}, {"link_type_str": "def-use@taicu", "source": 84, "text": "def-use@taicu", "type": 51, "value": 1, "target": 82}, {"link_type_str": "def-use@taicu", "source": 84, "text": "def-use@taicu", "type": 51, "value": 1, "target": 81}, {"link_type_str": "def-use@taicu", "source": 83, "text": "def-use@taicu", "type": 51, "value": 1, "target": 80}, {"link_type_str": "def-use@taicu", "source": 83, "text": "def-use@taicu", "type": 51, "value": 1, "target": 79}, {"link_type_str": "def-use@method", "source": 77, "text": "def-use@method", "type": 56, "value": 1, "target": 80}, {"link_type_str": "systematic", "source": 68, "text": "systematic", "type": 44, "value": 1, "target": 69}, {"link_type_str": "systematic", "source": 68, "text": "systematic", "type": 44, "value": 1, "target": 70}, {"link_type_str": "systematic", "source": 68, "text": "systematic", "type": 44, "value": 1, "target": 71}, {"link_type_str": "systematic", "source": 69, "text": "systematic", "type": 44, "value": 1, "target": 70}, {"link_type_str": "systematic", "source": 69, "text": "systematic", "type": 44, "value": 1, "target": 71}, {"link_type_str": "systematic", "source": 70, "text": "systematic", "type": 44, "value": 1, "target": 71}, {"link_type_str": "systematic", "source": 76, "text": "systematic", "type": 44, "value": 1, "target": 77}]}